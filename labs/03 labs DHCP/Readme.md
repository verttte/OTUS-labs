Схема лабораторного стенда

--== Вот тут она будет ==--

Таблица адресации

--== Вот тут она будет ==--

Таблица VLAN

--== Вот тут она будет ==--

### Часть 1: Построение сети и настройка основных параметров устройства

Произведены базовые настройки устройств в соответствии с методичкой.

В соответствии с требованиями сеть 192.168.1.0/24 разбивается на три подсети

- 192.168.1.0/26 - Clients R1
- 192.168.1.64/27 - Mgmt R1
- 192.168.1.96/28 - Clients R2

#### Настройка маршрутизации между VLAN на R1.

- включен интерфейс Ethernet0/1 в сторону коммутатора
- настроены субинтерфейсы 
  - инкапсуляция 802.1Q
  - назначен первый полезный адрес из вычисленного пула IP-адресов
  - субинтерфейсу для native VLAN не назначен IP-адрес
  - указаны описания для каждого субинтерфейса
- убеждаемся, что субинтерфейсы работают командой `show interface ethernet 0/1.100` - в выводе видим `is up, line protocol is up`

#### Настройка связи между маршрутизаторами

На R2 порту Et0/1 в торону коммутатора назначается IP 192.168.1.97 255.255.255.240

Стыковые порты на каждом маршрутизаторе настраиваются в стыковую сеть 10.0.0.0/30

R1 Et0/0 - 10.0.0.1 255.255.255.252

R2 Et0/0 - 10.0.0.2 255.255.255.252

Настраиваем маршрут по умолчанию на каждом маршрутизаторе на IP-адрес стыкового IP соседнего маршрутизатора.

`
R1(config)#ip route 0.0.0.0 0.0.0.0 10.0.0.2
`

`
R2(config)#ip route 0.0.0.0 0.0.0.0 10.0.0.1
`

Убеждаемся, что статическая маршрутизация работает отправляя эхо-запрос с одного маршрутизатора на IP-адрес, который настроен на другом маршрутизаторе.

```
R1#ping 192.168.1.97
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 192.168.1.97, timeout is 2 seconds:
!!!!!
```

#### Настройка коммутаторов

На S1 созданы VLAN в соответствии с таблицей, настроен интерфейс управления VLAN 200, ему назначен второй IP-адрес из подсети управления. Настроен шлюз по умолчанию.

Неиспользуемым портам Et0/0-1 назначается VLAN 999, производится настройка в режим access, порты отключаются.

Используемые порты переводим в режим access. Et0/3 назначается VLAN 100.

Вопрос из методички:

>Почему интерфейс F0 / 5 указан в VLAN 1?

В нашей схеме это порт Et0/2. Ответ: порт, которому не указано однозначно какой VLAN он принадлежит помещается в умолчальную VLAN 1.

Устанавливаем для порта Et0/2 режим trunk, разрешаем VLAN 100, 200 и 1000; native VLAN указываем 1000.

Проверяем состояние транкинга.

```
S1#sh int e0/2 switchport
Name: Et0/2
Switchport: Enabled
Administrative Mode: trunk
Operational Mode: trunk
Administrative Trunking Encapsulation: dot1q
Operational Trunking Encapsulation: dot1q
Negotiation of Trunking: Off
Access Mode VLAN: 1 (default)
Trunking Native Mode VLAN: 1000 (Native)
Administrative Native VLAN tagging: enabled
<...>
Trunking VLANs Enabled: 100,200,1000
```

На S2 используется только VLAN 1. Поэтому для его управления создан интерфейс VLAN 1 и используется второй адрес из сети назначенной на порту маршрутизатора в сторону S2 - 192.168.1.98 255.255.255.240. Настроен шлюз по умолчанию.

Неиспользуемые порты Et0/0-1 отключаются.

Вопрос из методички:
>На этом этапе какой IP-адрес был бы у ПК, если бы они были подключены к сети с помощью DHCP?

Ответ: IP-адрес отсутствовал бы, либо автоматически был бы настроен link-local адрес из диапазона 169.254.0.0/16, при условии, что эта технология поддерживается ОС и включена.

### Часть 2: Настройка и проверка двух серверов DHCPv4 на R1 

Производим настройки на R1 для двух диапазонов клиентских подсетей

- исключаем первые пять адресов из пула.
- создаем и именуем пул
- указываем сеть, которую поддерживает этот DHCP-сервер
- указываем шлюз по умолчанию для каждого пула
- указываем доменное имя
- назначаем время аренды 2 дня 12 часов 30 минут

```
ip dhcp excluded-address 192.168.1.1 192.168.1.5
ip dhcp excluded-address 192.168.1.97 192.168.1.101
!
ip dhcp pool R1_Clients_LAN
 network 192.168.1.0 255.255.255.192
 default-router 192.168.1.1
 domain-name ccna-lab.com
 lease 2 12 30
!
ip dhcp pool R2_Clients_LAN
 network 192.168.1.96 255.255.255.240
 default-router 192.168.1.97
 domain-name ccna-lab.com
 lease 2 12 30
```




